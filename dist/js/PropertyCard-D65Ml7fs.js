import{j as e}from"../assets/index-CjiBnxQ6.js";import{r as t,L as s}from"./router-Cqyp-vmz.js";import{v as r,w as a,x as n,y as i,z as l}from"./ui-Cv49lX3S.js";var o=new Map,c=new WeakMap,d=0;function m(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{return`${t}_${"root"===t?(s=e.root,s?(c.has(s)||(d+=1,c.set(s,d.toString())),c.get(s)):"0"):e[t]}`;var s}).toString()}function u(e,t,s={},r=void 0){if(void 0===window.IntersectionObserver&&void 0!==r){const a=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof s.threshold?s.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:a,observer:n,elements:i}=function(e){const t=m(e);let s=o.get(t);if(!s){const r=new Map;let a;const n=new IntersectionObserver(t=>{t.forEach(t=>{var s;const n=t.isIntersecting&&a.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=n),null==(s=r.get(t.target))||s.forEach(e=>{e(n,t)})})},e);a=n.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:t,observer:n,elements:r},o.set(t,s)}return s}(s),l=i.get(e)||[];return i.has(e)||i.set(e,l),l.push(t),n.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(i.delete(e),n.unobserve(e)),0===i.size&&(n.disconnect(),o.delete(a))}}const x=t.memo(({src:s,alt:r,className:a,priority:n=!1})=>{const[i,o]=t.useState(!1),[c,d]=t.useState(!1),m=t.useRef(null),{ref:x,inView:h}=function({threshold:e,delay:s,trackVisibility:r,rootMargin:a,root:n,triggerOnce:i,skip:l,initialInView:o,fallbackInView:c,onChange:d}={}){var m;const[x,h]=t.useState(null),f=t.useRef(d),g=t.useRef(o),[p,b]=t.useState({inView:!!o,entry:void 0});f.current=d,t.useEffect(()=>{if(void 0===g.current&&(g.current=o),l||!x)return;let t;return t=u(x,(e,s)=>{const r=g.current;g.current=e,(void 0!==r||e)&&(b({inView:e,entry:s}),f.current&&f.current(e,s),s.isIntersecting&&i&&t&&(t(),t=void 0))},{root:n,rootMargin:a,threshold:e,trackVisibility:r,delay:s},c),()=>{t&&t()}},[Array.isArray(e)?e.toString():e,x,n,a,i,l,r,c,s]);const y=null==(m=p.entry)?void 0:m.target,v=t.useRef(void 0);x||!y||i||l||v.current===y||(v.current=y,b({inView:!!o,entry:void 0}),g.current=o);const w=[h,p.inView,p.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}({triggerOnce:!0,skip:n,threshold:.1}),f=t.useCallback(e=>{e&&(m.current=e),x(e)},[x]);t.useEffect(()=>{if(n||h){const e=m.current;e&&!e.src&&(e.src=s)}},[h,s,n]);const g=t.useCallback(()=>{o(!0)},[]),p=t.useCallback(()=>{d(!0),o(!0)},[]);return c?e.jsx("div",{className:`${a} bg-gray-200 flex items-center justify-center`,children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(l,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Image not available"})]})}):e.jsxs("div",{className:`${a} relative overflow-hidden`,children:[!i&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:e.jsx("div",{className:"text-gray-400",children:e.jsx(l,{className:"w-8 h-8"})})}),e.jsx("img",{ref:f,alt:r,width:"400",height:"256",className:"w-full h-full object-cover transition-opacity duration-300 "+(i?"opacity-100":"opacity-0"),onLoad:g,onError:p,loading:n?"eager":"lazy",decoding:"async",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"})]})});x.displayName="LazyImage";const h=t.memo(({property:l,priority:o=!1})=>{const[,c]=t.useState(!1);t.useEffect(()=>{if(o){const e=document.createElement("link");return e.rel="preload",e.as="image",e.href=l.imageUrl,document.head.appendChild(e),()=>{document.head.removeChild(e)}}},[l.imageUrl,o]);const d=t.useCallback(()=>l.badges&&0!==l.badges.length?e.jsx("div",{className:"absolute top-4 left-4 flex flex-wrap gap-2 z-10",children:l.badges.map((t,s)=>e.jsx("span",{className:"bg-p4c-navy text-white text-xs font-bold px-2.5 py-1 rounded-md uppercase tracking-wide shadow-sm ring-1 ring-white/20",children:t},`${t}-${s}`))}):null,[l.badges]),m=t.useCallback(e=>{const t="number"==typeof e?e:parseFloat(e.replace(/[^0-9.]/g,""));return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t)},[]);return e.jsxs("div",{className:"bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 ring-1 ring-gray-900/5 flex flex-col h-full group transform hover:-translate-y-1",onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:[e.jsxs("div",{className:"relative h-64 overflow-hidden",children:[e.jsx(x,{src:l.imageUrl,alt:l.title,className:"w-full h-full transform transition-transform duration-700 group-hover:scale-105",priority:o}),d(),e.jsx("div",{className:"absolute bottom-0 left-0 w-full bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsxs("div",{className:"text-white font-bold text-lg",children:[m(l.price)," ",e.jsx("span",{className:"text-sm font-normal opacity-90",children:"/ month"})]})})]}),e.jsxs("div",{className:"p-6 flex-1 flex flex-col",children:[e.jsx("h3",{className:"text-xl font-serif font-bold text-p4c-navy mb-1 line-clamp-2",children:l.title}),e.jsxs("p",{className:"text-gray-500 text-sm flex items-center mb-4",children:[e.jsx(r,{className:"w-3 h-3 mr-1 text-p4c-gold flex-shrink-0"}),e.jsx("span",{className:"truncate",children:l.address})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-6 line-clamp-3 leading-relaxed flex-grow",children:l.description}),e.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-100 grid grid-cols-3 gap-3 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(a,{className:"w-5 h-5 text-p4c-slate mb-1.5"}),e.jsxs("span",{className:"text-xs font-semibold text-p4c-navy",children:[l.beds," Bed"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(n,{className:"w-5 h-5 text-p4c-slate mb-1.5"}),e.jsxs("span",{className:"text-xs font-semibold text-p4c-navy",children:[l.baths," Bath"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center p-3 bg-gray-50 rounded-lg",children:[e.jsx(i,{className:"w-5 h-5 text-p4c-slate mb-1.5"}),e.jsxs("span",{className:"text-xs font-semibold text-p4c-navy",children:["number"==typeof l.sqft?l.sqft.toLocaleString():l.sqft," ","sqft"]})]})]}),e.jsx(s,{to:`/properties/${l.id}`,className:"block w-full text-center mt-6 border-2 border-p4c-navy text-p4c-navy hover:bg-p4c-navy hover:text-white font-bold py-2.5 rounded-lg transition-colors duration-200 text-sm uppercase tracking-wide","aria-label":`View details for ${l.title}`,children:"View Details"})]})]})});h.displayName="PropertyCard";export{h as P};
